{"version":3,"sources":["components/formatters/EntityReferenceEntityFormatter.js"],"names":["EntityReferenceEntityFormatter","items","formatter","settings","parents","params","useContext","EntityContext","useState","setError","loading","setLoading","entities","setEntities","useEffect","ids","map","item","i","id","reduce","acc","type","split","entityType","bundle","GlobalClient","baseUrl","api","sendCookies","EntityManager","LoadAsyncMethod","entityBundle","entityUuids","include","pageOffset","pageLimit","viewMode","view_mode","console","log","ent","arrayParents","key","getId"],"mappings":"uNAqCeA,UAjCwB,EAAGC,QAAOC,YAAWC,WAAUC,cAAe,MACzEC,EAAWC,qBAAWC,KAAtBF,OADwE,EAEtDG,mBAAS,MAF6C,mBAElEC,GAFkE,aAGlDD,oBAAS,GAHyC,mBAGzEE,EAHyE,KAGhEC,EAHgE,OAIhDH,mBAAS,MAJuC,mBAIzEI,EAJyE,KAI/DC,EAJ+D,KAmBhF,OAdAC,oBAAU,KACN,MAAMC,EAAMd,EAAMe,IAAI,CAACC,EAAMC,IAAMD,EAAKE,IAD5B,EAEiBlB,EAAMmB,OAAO,CAACC,EAAKJ,IAASA,EAAKK,KAAKC,MAAM,MAAO,IAFpE,mBAELC,EAFK,KAEOC,EAFP,KAGZC,eAAaC,QAAUtB,EAAOuB,IAAID,QAClCD,eAAaG,aAAc,EAC3BC,IAAcC,gBACV,4BACA,CAAC,CAAEP,aAAYQ,aAAcP,EAAQQ,YAAalB,EAAKmB,QAAS,GAAIC,WAAY,EAAGC,UAAW,GAAIC,SAAUnC,EAAUC,SAASmC,YAC/HzB,EACAJ,EACAE,IAEL,CAACT,EAAUC,SAASmC,UAAWrC,EAAOI,EAAOuB,IAAID,UAE/CjB,GAAwB,OAAbE,GAUhB2B,QAAQC,IAAI,WACL,4CAVI5B,EAASI,IAAKyB,IACjB,MAAMC,EAAe,CACjBD,KACGrC,GAGP,OADAmC,QAAQC,IAAIE,GACL,yBAAKC,IAAKF,EAAIG,SAAS,kBAAC,IAAD,CAAexC,QAASsC","file":"static/js/10.a809de64.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { LayoutBuilder, EntityContext, EntityManager } from 'react-drupal-layout-builder';\nimport { GlobalClient } from 'drupal-jsonapi-client'\n\nconst EntityReferenceEntityFormatter = ({ items, formatter, settings, parents }) => {\n    const { params } = useContext(EntityContext);\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [entities, setEntities] = useState(null);\n    useEffect(() => {\n        const ids = items.map((item, i) => item.id);\n        const [entityType, bundle] = items.reduce((acc, item) => item.type.split('--'), []);\n        GlobalClient.baseUrl = params.api.baseUrl;\n        GlobalClient.sendCookies = false\n        EntityManager.LoadAsyncMethod(\n            'LoadEntityDisplayMultiple',\n            [{ entityType, entityBundle: bundle, entityUuids: ids, include: [], pageOffset: 0, pageLimit: 50, viewMode: formatter.settings.view_mode }],\n            setEntities,\n            setError,\n            setLoading\n        );\n    }, [formatter.settings.view_mode, items, params.api.baseUrl]);\n\n    if (!loading && entities !== null) {\n        return entities.map((ent) => {\n            const arrayParents = [\n                ent,\n                ...parents\n            ];\n            console.log(arrayParents);\n            return <div key={ent.getId()}><LayoutBuilder parents={arrayParents} /></div>\n        });\n    }\n    console.log('loading');\n    return <div>loading...</div>;\n}\n\nexport default EntityReferenceEntityFormatter;"],"sourceRoot":""}